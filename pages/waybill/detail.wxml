<!--Order details.wxml-->
<view class="public-bg">
    <view class="order-box">
        <view><text class="order-stitle">油料</text>:  {{waybill.oil.name}}</view>
        <view><text class="order-stitle">总重量</text>:  {{waybill.weight}}</view>
        <view><text class="order-stitle">供应商</text>:  {{waybill.provider}}</view>
        <view><text class="order-stitle">地址</text>:  {{waybill.station}} <text bindtap="showLocatioin" data-lat="{{waybill.lat}}" data-lng="{{waybill.lng}}" class="main-color Location">查看位置</text></view>

        <block wx:if="{{waybill.status == 0 }}">
            <button bindtap="waybillPickup" data-waybill="{{waybill.id}}" class="btn">开始取货</button>
        </block>

        <block wx:if="{{waybill.status == 1 }}">
            <button bindtap="waybillDeliver" data-waybill="{{waybill.id}}" class="btn">开始送货</button>
        </block>

        <block wx:if="{{waybill.status < 3 }}">
            <button bindtap="showCancelBox" data-waybill="{{waybill.id}}" class="btn btn-white">取消订单</button>
        </block>
    </view>

    <block wx:for="{{waybill.order_oil}}" wx:key="key" wx:for-item="item">

        <view class="oil-box order-box {{ item.status==-1 ? 'order-cancel' : '' }}">
            <view><text class="order-stitle">订单号</text>: {{item.order_no}}</view>
            <view><text class="order-stitle">油品</text>: {{waybill.oil.name}}</view>
            <view><text class="order-stitle">总重量</text>: {{item.weight}}</view>
            <!-- <view><text>距离</text>:  {{item.distance}}</view> -->
            <view><text class="order-stitle">下单时间</text>: {{item.created_at}}</view>
            <view><text class="order-stitle">期望送达</text>: {{item.expected_time}}</view>
            <view><text class="order-stitle">订单状态</text>: {{item.status_text}}</view>
            <view><text class="order-stitle">送货地址</text>: 
                <block wx:for="{{ item.address }}" wx:for-item="addr" wx:key="addrs">
                    <view>{{ addr.address }} <text bindtap="showLocatioin" data-lat="{{addr.lat}}" data-lng="{{addr.lng}}"  class="main-color Location">查看位置</text></view>
                </block>
            </view>

            <view>
                <block wx:if="{{item.status == 2 }}">
                    <button bindtap="orderArrive" data-order="{{item.order_id}}" class="btn">到达</button>
                </block>

                <block wx:if="{{item.status == 3 }}">
                    <button bindtap="orderDone" data-order="{{item.order_id}}" class="btn">完成</button>
                </block>

                <block wx:if="{{item.status == 4 }}">
                </block>
            </view>
        </view>

    </block>
<!--    <view class="Driver-box">
        <view><text>司机</text>：xxx</view>
        <view><text>车牌</text>：xxx</view>
        <view><text>司机工号</text>:  xxxx</view>
        <view><text>司机电话</text>:  xxxxxxx</view>
    </view>  -->

    <view class="public-mask" hidden="{{ mask }}">
        <view class="mask-content">
            <form bindsubmit="waybillCancel">
                <view class="mask-title">请选择取消理由</view>
                <view class="mask-info">
                    <radio-group class="radio-group" name="reason_radio">
                        <label class="radio" > <radio value="交通事故" />交通事故 </label>
                        <label class="radio" > <radio value="车辆损坏" />车辆损坏 </label>
                    </radio-group>
                    <!-- <text class="reason"><radio value="" name='reason' checked/>交通事故</text> -->
                    <!-- <text class="reason"><radio value="" name='reason' checked/>车辆损坏</text> -->
                    <textarea placeholder="或者请填写其他理由" name="reason_text" ></textarea>
                </view>
                <view class="mask-btn">
                    <button class="confirm-btn" formType="submit">确定</button>
                    <button bindtap="closeCancelBox" class="cancel-btn">取消</button>
                </view>
            </form>
        </view>
    </view>
</view>
